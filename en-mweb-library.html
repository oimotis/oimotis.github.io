
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="atom.xml" rel="alternate" title="MWeb" type="application/atom+xml">
    <title> 
	  
  	MWeb document library detailed introduction - MWeb
  	
  	</title>
     <link rel="icon" sizes="192x192" href="asset/icon_192.png" />
    <link rel="shortcut icon" href="asset/icon_64.png" type="image/png" />

    <link href="asset/css/bootstrap.min.css" rel="stylesheet">
    <link href="asset/css/style.css" rel="stylesheet">
    <script src="asset/js/jquery.min.js"></script>
    <script src="asset/js/bootstrap.min.js"></script>
    <script src="asset/js/docs.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
	<link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
	<script>hljs.initHighlightingOnLoad();</script>
    <!--[if lt IE 9]>
      <script src="asset/js/html5shiv.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="blog-masthead">
      <div class="container">
        <nav class="blog-nav">
           
        <a class="menu-index blog-nav-item" target="_self" href="index.html">Home</a>
        
        <a class="menu-help blog-nav-item" target="_self" href="en-help.html">Documentation</a>
        
        <a class="menu-themes blog-nav-item" target="_self" href="themes.html">Themes</a>
        
        <a class="menu-blog blog-nav-item" target="_self" href="download.html">Download</a>
        
        <a class="menu-about blog-nav-item" target="_self" href="about.html">About</a>
        
        <a class="menu-lang blog-nav-item" target="_self" href="https://zh.mweb.im/">中文</a>
        
        
        </nav>
      </div>
    </div>
    
    
 <div class="container" id="content-wrap">
 

	<div class="row">
		<div class="col-sm-10 blog-main">
			<h1 style="padding-left: 20px;">
				<a href="en-help.html">Documentation</a> - MWeb document library detailed introduction</h1>
		</div>
	</div>
	<hr style="margin-bottom: 20px;" />


      <div class="row">

        <div class="col-sm-10 blog-main">
			<div class="blog-content-wrap">
				<div class="blog-post">
		            <div class="content-responsive">
		            <p>This article introduces the detailed use of the Library. If you haven't read <a href="en-mweb-start.html">Basic usage of MWeb</a>, I suggest you read it first. It should be noted that the following content in this article is almost all about MWeb on macOS. The use of the Library on iPadOS/iOS is relatively simple, mainly by clicking the &quot;+&quot; button at the bottom to add new categories and documents. then <strong>long press</strong> the list item to favorite, move, rename and delete operations by category or document.</p>
<h2><a id="the-library-storage-location" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Library storage location</h2>
<p>MWeb's Library can be stored in a folder, or in iCloud (synchronized using CloudKit technology). In MWeb for macOS, you can view the location where the Library is stored in <code>Preferences - Library &amp; Backup</code>; in MWeb for iPadOS/iOS, you can view the location of the Library in <code>Settings Page - Library</code>. It should be noted that under iPadOS/iOS, if your Library is not stored in iCloud, when you delete the MWeb app, the Library will also be deleted! Therefore, it is recommended that set the Library stored in iCloud on iPadOS/iOS. If you want to sync across multiple devices, please also store your Library in iCloud.</p>
<h2><a id="the-library-structure-backup-and-restore-from-backup" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Library structure, backup and restore from backup</h2>
<p>In general, it is not necessary to understand the structure of the Library. If you are using MWeb under macOS and want to backup or restore the Library, then it is necessary to understand the structure of the Library. Under macOS, when the Library is stored in a folder, you can directly view the folder where the Library is located to understand the structure of the Library. When the Library is stored in iCloud, MWeb will use CloudKit technology to completely synchronize the entire Library to a private folder of the MWeb. the located at: <code>~/Library/Containers/com.coderforart.MWeb3/ Data/Library/Application Support/MWebLibrary</code>. If you are using MWeb Standard version, please replace <code>com.coderforart.MWeb3</code> with <code>com.coderforart.iOS.MWeb</code>.</p>
<p>The folder structure of the Library is composed of the docs folder, the mainlib.db file and the metadata folder. Among them, the docs folder contains the related materials of each note . The mainlib.db file saves the category and tag information and the category information to which the note belongs. The metadata folder only exists when the publishing service is used, and saves the information related to the publishing service. The figure below is a typical Library structure.</p>
<p><img src="media/15303755379614/15303762803232.jpg" alt="" style="width:624px;" /></p>
<p>This structure works well for backups and for git backups, and you may have noticed that even if you choose to store your Library in iCloud, you can also back up your Library. Because MWeb will sync all data to a private folder, you only need to backup that folder.</p>
<p>Under macOS, if you want to restore a Library from a backup, there are two cases:</p>
<ol>
<li>When the Library is stored in a folder: first copy the folder of the backup Library to the location you want, then in <code>Preferences - Library &amp; Backup</code>, click the &quot;Choose an Existing Library...&quot; button and select that location.</li>
<li>When the Library is stored in iCloud: First, replace the files in the private folder (mentioned above) of the Library synchronization with all the files in the folder of the backed up Library. Then, restart MWeb and check if there is any problem with the data. If there is no problem, click the &quot;Sync&quot; button, in the menu that appears, select &quot;problem with synchronization?&quot;, and in the interface that appears, click &quot;Re-upload the current Library to iCloud&quot;. After the upload is complete, go to this interface and click &quot;Re-download all content on iCloud&quot;.</li>
</ol>
<h2><a id="how-to-use-the-categories-tree" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to use the categories tree</h2>
<p>There are two types of MWeb categories, one is the common categories, as shown below:</p>
<p><img src="media/15306209330609/15306213639577.jpg" alt="" style="width:477px;" /></p>
<p>One is static website categories, this categories can generate static websites, as shown below:</p>
<p><img src="media/15306209330609/15306214269910.jpg" alt="" style="width:736px;" /></p>
<p>MWeb provides a very simple way to generate a static website from the classified documents. For example, MWeb Chinese official website is generated by MWeb's static website function.</p>
<p>The categories tree on the left side of the interface can be associated with the right-click and drag-and-drop to complete related management operations. The middle document list bar can drag and drop documents to the left category for document categories management. There are three cases of this drag and drop, and the following assumes that the drag is <strong>Category A</strong>:</p>
<ol>
<li>Drag the current document directly to <strong>Category A</strong>. In this case, if the document in the list belongs to the currently selected category, it will move to the <strong>Class A</strong>, otherwise it will be added to the <strong>Category A</strong> for the dragged document.</li>
<li>Hold down the <code>CMD</code> key to drag the current document to the <strong>Category A</strong>. In this case, the added value of the dragged document is increased to <strong>Class A</strong>.</li>
<li>Hold down the <code>Option</code> button and drag the current document to the <strong>Category A</strong>. In this case, if the dragged document belongs to the <strong>Category A</strong>, the canceled document belongs to the <strong>Class A</strong>, If it does not belong to the <strong>Class A</strong>, no action is taken.</li>
</ol>
<p>This method of operation is more than one choice, that is, it can be managed in batches. If it is a single document, there is a better way to click on the top information bar of the editor and then check it, as shown below:</p>
<p><img src="media/15306209330609/15306215401440.jpg" alt="" style="width:589px;" /></p>
<p>This place is also the only place where you can set the document tag. You can also use the shortcut <code>CMD + 8</code> to open this interface.</p>
<h2><a id="reference-between-documents" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reference between documents</h2>
<p>It is very simple to reference other documents in MWeb. In the document list, right-click the document you want to reference and select ``.</p>
<p><img src="media/15306209330609/15306217306407.jpg" alt="" style="width:326px;" /></p>
<p>Then paste the location of the document to be referenced <code>CMD + V</code>, and MWeb will generate <code>[How to use Publish Script to Publish website.](how_to_use_shell_script.html)</code>. If you hold down the <code>CMD</code> key and click, the referenced document will be opened.</p>
<h2><a id="document-sorting" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Document Sorting</h2>
<p>The document library supports multiple sorting methods, and each top-level category can also set its own sorting method. There are two ways to modify the sorting method, one is as shown below:</p>
<p><img src="media/15306209330609/15306217971719.jpg" alt="" style="width:475px;" /></p>
<p>The other is to select the top-level category to be modified or a sub-category under the top-level category, and then right-click in the document list, as shown below:</p>
<p><img src="media/15306209330609/15306218457167.jpg" alt="" style="width:548px;" /></p>
<p>In various sorts, custom drag sorting is special and requires special instructions. Before I explain, let me explain a global option: <code>Group By Categories</code> Right-click in the document list to see the menu for this function. If it is enabled, it means that the documents in the list are in the state of grouping by category, no matter what sorting settings.<br />
This use is actually to find and organize documents. However, if this global option is not enabled, then if the sort is set to a custom drag sort, the top level will also be grouped by category. In other words, as long as it is a custom drag sort, the document list bar must be displayed in groups.<br />
This is due to the fact that a document can belong to multiple categories and the rules are set, otherwise it will be messy.<br />
If you try to drag and drop in a category that is not a custom sort, MWeb will prompt you to set it to a custom drag sort before you can drag and drop. Customize the documents under the drag sort category, it is recommended to ensure that only one category is classified, so drag and drop sorting will not be messy.</p>
<h2><a id="how-to-use-tags" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to use tags</h2>
<p>The function of the tag in MWeb is very simple. The method of setting the tag is as mentioned above. In addition, the document is viewed by Tag, as shown below:</p>
<p><img src="media/15306209330609/16042937243208.jpg" alt="" style="width:268px;" /></p>
<p>It can be seen that MWeb will list the tags of the entire document library and the tags under the currently selected category. After selecting, you can view the documents by tag.</p>
<h2><a id="document-outline-view" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Document Outline View</h2>
<p>As shown in the following figure, the document outline view will list the title and inserted images and attachments of the current document, and of course the extension items that can be used for static websites (if the current document belongs to a static website category). The figure below shows the effect of fixing the outline view.</p>
<p><img src="media/15306209330609/15306221680761.jpg" alt="" style="width:298px;" /></p>
<h2><a id="import-and-export-of-document-libraries" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Import and export of document libraries</h2>
<p>As shown in the following figure, the document library supports importing Markdown documents into the document library. If you select a folder when importing, MWeb will import all the Markdown documents in the folder into the currently selected category. If there is a local image in the Markdown document of the folder, it will also be imported and modified to the image address in the document library format. This is only available in version 3.x. Version 2.x will only import Markdown text and will not import images. It should be noted that to import images, be sure to select the entire folder.<br />
<img src="media/15306209330609/15306222408003.jpg" alt="" style="width:546px;" /></p>
<p>In addition, you can export the entire categories to Markdown, and the exported Markdown document will create a folder according to the structure of the categories. Creating folders by category structure is also a feature that is only available in 3.x.</p>
<p>The remaining two are exported to Epub and PDF. Yes, you can export the entire category to Epub or PDF!</p>
<h2><a id="some-question-with-mweb-4-icloud-sync-library" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Some question with MWeb 4 iCloud sync Library</h2>
<p><strong>What's the difference between MWeb 3's iCloud sync and MWeb 4's?</strong></p>
<p>The synchronization of MWeb 3 is to save the folder of the Library in iCloud Drive, and the system will synchronize the files. The synchronization of MWeb 4 is performed using a technology called CloudKit, which is controlled by MWeb and is no longer stored in iCloud Drive. If you want to use MWeb 4's iCloud sync, you need to manually click the &quot;Store to iCloud&quot; button in the <code>Preferences - Library &amp; Backup</code>.</p>
<p><strong>How ​​does MWeb 3's Library sync to iCloud?</strong></p>
<p>If it is the macOS version of MWeb, please first confirm whether it is saved to the folder of iCloud Drive or a related cloud drive. If so, you need to ensure that the folder where the Library is located is completely synchronized to the local. In short, we must first ensure that the current Library is complete sync.</p>
<p>Then, in <code>Preferences - Library &amp; Backup</code>, click the <code>Store in iCloud</code> button, and then select <strong>Merge</strong> in the pop-up prompt to choose whether to merge Library.<br />
This prompt is only displayed once. If it is too late to choose, you can refer to the method of restoring from backup in &quot;The Library structure, backup and restore from backup&quot; at the top of this article.</p>
<p>If it is the iOS version of MWeb, because the original iOS version of the Library is read-only, you need to use the macOS version of MWeb first, and synchronize the Library to iCloud according to the above method. Then in the iOS version, you can also set the Library to <code>Store in iCloud</code>.</p>
<p><strong>Can I manually git backup my Library when choose stored to iCloud?</strong></p>
<p>Yes, in MWeb 4, Apple's CloudKit technology is used for synchronization, which will completely synchronize all documents to a private folder of the local MWeb, located at: <code>~/Library/Containers/com.coderforart .MWeb3/Data/Library/Application Support/MWebLibrary</code>. If you are using MWeb Standard version, please replace <code>com.coderforart.MWeb3</code> with <code>com.coderforart.iOS.MWeb</code>.<br />
If you want backups or git backups, just back up this location regularly. This location can only be backed up, please do not change it.</p>
<p>The structure of the Library in this location is the same as the local one. If you do not want to use iCloud synchronization, you can copy this folder to other places, then switch back to the local folder storage in MWeb, and then select the copied folder That's it.</p>
<p><strong>What if the desired version of the document is overwritten when syncing with iCloud?</strong></p>
<p>In the macOS version of MWeb, you can use the menu: <code>File - Revert to - Browse All Versions</code>, for the iOS version, you can click the &quot;...&quot; button and select &quot;Document History...&quot; to restore. It should be noted that the document version for iOS is only for iCloud-synced documents in the Library. It is recommended to avoid editing the same document on multiple devices. If you want to edit it, please confirm that the document is in the latest state.<br />
Because the synchronization process is stateless, for example, the current device network is not good, network transmission errors, CloudKit errors, etc. will cause the latest version of the current device's document to be unable to be synchronized to CloudKit in time. At this time, if another device uploads A new version of the document, and then the current device becomes normal, will receive an update push from another device, and the current device's document will be updated.</p>
<p><strong>Want to initialize the MWeb document library</strong></p>
<p>If you want to initialize MWeb's document library, the methods are:</p>
<ol>
<li>Download <a href="https://cdn.mwebapp.cn/MWebInitLibrary.zip">https://cdn.mwebapp.cn/MWebInitLibrary.zip</a> and unzip it, then use <code>Choose an Existing Library...</code> to select the location after unzipping.</li>
<li>Run the command on the command line: <code>defaults delete com.coderforart.MWeb3</code> (or <code>defaults delete com.coderforart.iOS.MWeb</code> if MWeb Standard version), this operation will delete all MWeb preferences, Start all over again.</li>
</ol>

		            </div>
				</div><!-- /.blog-post -->
			</div>
			<div class="share-comment">
			<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-55117df11d1413c3" async="async"></script>
<!-- Go to www.addthis.com/dashboard to customize your tools -->
<div class="addthis_native_toolbox"></div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'mweb-en';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

			</div>

        </div><!-- /.blog-main -->
	</div>
</div>   <footer class="blog-footer">
      <p>Copyright &copy; 2022
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a> &nbsp;&nbsp; host on <a target="_blank" href="https://github.com/">Github Pages</a>
.</p>
      <p>
        <a href="#">Back to top</a>
      </p>
    </footer>



<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>

  














    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="asset/js/ie10-viewport-bug-workaround.js"></script>
    

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QBER5BMYWD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QBER5BMYWD');
</script>
  </body>
</html>